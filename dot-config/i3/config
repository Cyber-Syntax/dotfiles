# ============================= INFO ======================================
#exec: command will not run when restarting i3
#exec_always: command will run when restarting i3
# ============================= /.INFO ====================================

# ============================= EXEC ====================================
# Start XDG autostart .desktop files using dex. See also
# https://wiki.archlinux.org/index.php/XDG_Autostart
exec --no-startup-id dex --autostart --environment i3

# layout that looks like a monadtall
# https://github.com/olemartinorg/i3-alternating-layout
exec_always --no-startup-id ~/.config/i3/scripts/i3-alternating-layout.py

exec dunst &
exec --no-startup-id nm-applet &
exec --no-startup-id picom -b &
exec --no-startup-id numlockx on &
exec --no-startup-id gammastep -c ~/.config/gammastep/config.ini &
exec_always --no-startup-id $HOME/.config/polybar/launch.sh &

# custom app/scripts
exec_always --no-startup-id ~/Documents/my-repos/WallpaperChanger/main.py &
exec flatpak run io.github.martchus.syncthingtray --wait &
exec ~/Applications/zen-browser.AppImage &

#NOTE: only locks not work when screen off
#TODO: find a way to lock screen via i3lock?
exec_always --no-startup-id xfce4-power-manager

# ============================= ./EXEC ====================

# ============================= /hosts ====================

# 2 machine setup with hostname based config include
include ~/.config/i3/hosts/$(hostname).conf

# ============================= ./hosts ====================

# ============================= KEYS ====================================

#TODO: maybe $mod would be better?
#	set $mod Mod4

# change focus between tiling / floating windows
# bindsym Mod4+space focus mode_toggle

# Input configuration
#FIXME: below input * not working in i3 config
# input * {
# xkb_layout tr
# # dwt disabled
# tap enabled
# tap_button_map lrm
# middle_emulation enabled
# # xkb_variant nodeadkeys
# # xkb_options caps:swapescape
# }

# move tiling windows via drag & drop by left-clicking into the title bar,
# or left-clicking anywhere into the window while holding the floating modifier.
# tiling_drag modifier titlebar

# use Mouse+Mod4 to drag floating windows to their wanted position
floating_modifier Mod4

## APPS ##
set $TERM alacritty
set $FILE_MANAGER pcmanfm

# start a terminal
bindsym Mod4+Return exec $TERM

# Files
bindsym Mod4+z exec $FILE_MANAGER

# Firefox, less = '<'
# bindsym Mod4+less exec firefox

# ROFI
bindsym Mod4+r exec --no-startup-id ~/.config/rofi/launchers/type-6/launcher.sh
bindsym Mod4+x exec --no-startup-id ~/.config/rofi/powermenu/type-6/powermenu.sh
bindsym Mod4+m exec --no-startup-id ~/.config/rofi/output/pulseaudio.sh

## ./APPS ##

# USEFUL SHORTCUTS
# kill focused window
bindsym Mod4+q kill

# FOCUS MONITORS
bindsym Mod4+a focus left ; exec --no-startup-id ~/.config/i3/scripts/move-cursor-to-focused.sh
bindsym Mod4+d focus right ; exec --no-startup-id ~/.config/i3/scripts/move-cursor-to-focused.sh
bindsym Mod4+w focus down ; exec --no-startup-id ~/.config/i3/scripts/move-cursor-to-focused.sh
bindsym Mod4+s focus up ; exec --no-startup-id ~/.config/i3/scripts/move-cursor-to-focused.sh

# toggle tiling / floating
bindsym Mod4+Shift+space floating toggle

# change container layout (stacked, tabbed, toggle split)
# make tabbed layout default
workspace_layout tabbed
# toggle between tabbed
bindsym Mod4+y layout tabbed

# Toggle splith(dikey) / tabbed
bindsym Mod4+space layout toggle tabbed splith

#bindsym Mod4+p layout stacking
bindsym Mod4+less layout toggle split

# enter fullscreen mode for the focused container
bindsym Mod4+f fullscreen toggle

# SEND APPS LEFT TO RIGHT ETC.
# bindsym Mod4+e exec i3-msg move window to output right
# bindsym Mod4+w exec i3-msg move window to output left

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym F1 restart

# restart better to restart polybar etc.
bindsym Mod4+ctrl+r exec bash -c "$HOME/.config/i3/scripts/restart-i3.sh"

# exit i3 (logs you out of your X session)
set $executeExit exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -B 'Yes, exit i3' 'i3-msg exit'"
bindsym Mod4+Shift+q $executeExit

# move the currently focused window to the scratchpad
bindsym Mod4+Shift+minus move scratchpad

# Show the next scratchpad window or hide the focused scratchpad window.
# If there are multiple scratchpad windows, this command cycles through them.
bindsym Mod4+minus scratchpad show

## Clipboard Screenshots
bindsym Print exec --no-startup-id flameshot gui

## Multimedia ##

# Use pactl to adjust volume in PulseAudio.
set $refresh_i3status killall -SIGUSR1 i3status
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +10% && $refresh_i3status
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -10% && $refresh_i3status
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3status

# Multimedia Keys
bindsym XF86AudioPlay exec playerctl play-pause
bindsym XF86AudioPause exec playerctl play-pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous
bindsym XF86AudioStop exec playerctl stop

## ./Multimedia ##
# resize window (you can also use the mouse for that)
mode "resize" {
# These bindings trigger as soon as you enter the resize mode

# same bindings, but for the arrow keys
bindsym Left        resize shrink width 10 px or 10 ppt
bindsym Down        resize grow height 10 px or 10 ppt
bindsym Up          resize shrink height 10 px or 10 ppt
bindsym Right       resize grow width 10 px or 10 ppt

# back to normal: Enter or Escape or Mod4+r
bindsym Return mode "default"
bindsym Escape mode "default"
bindsym Mod4+ctrl+r mode "default"
}

## OTHER FOCUS

# use these keys for focus, movement, and resize directions when reaching for
# the arrows is not convenient
set $up l
set $down k
set $left j
set $right semicolon

# move focused window
bindsym Mod4+Shift+$left move left
bindsym Mod4+Shift+$down move down
bindsym Mod4+Shift+$up move up
bindsym Mod4+Shift+$right move right

# change focus
bindsym Mod4+$left focus left
bindsym Mod4+$down focus down
bindsym Mod4+$up focus up
bindsym Mod4+$right focus right

# alternatively, you can use the cursor keys:
bindsym Mod4+Shift+Left move left
bindsym Mod4+Shift+Down move down
bindsym Mod4+Shift+Up move up
bindsym Mod4+Shift+Right move right

# ============================= ./KEYS ====================================

# ============================= WORKSPACES ====================================

# SPECIFIC APPS START SPECIFIC WORKSPACE
assign [class="^zen$"] 1
assign [class="^Brave-browser$"] 1
assign [class="^Chromium-browser$"] 1
assign [class="^Code$"] 2
assign [class="^dev.zed.Zed$"] 2
assign [class="^FreeTube$"] 3
assign [class="^Signal$"] 3
assign [class="superProductivity"] 4
assign [class="^Spotify$"] 5
assign [class="^Virt-manager$"] 5

# Set workspace names
set $ws1 1
set $ws2 2
set $ws3 3
set $ws4 4
set $ws5 5

# Cycle groups
bindsym Mod4+Tab workspace next
bindsym Mod4+Shift+Tab workspace prev

# switch to workspace
bindsym Mod4+1 workspace number $ws1
bindsym Mod4+2 workspace number $ws2
bindsym Mod4+3 workspace number $ws3
bindsym Mod4+4 workspace number $ws4
bindsym Mod4+5 workspace number $ws5
bindsym Mod4+6 workspace number $ws6

# move focused container to workspace
bindsym Mod4+Shift+1 move container to workspace number $ws1
bindsym Mod4+Shift+2 move container to workspace number $ws2
bindsym Mod4+Shift+3 move container to workspace number $ws3
bindsym Mod4+Shift+4 move container to workspace number $ws4
bindsym Mod4+Shift+5 move container to workspace number $ws5
bindsym Mod4+Shift+6 move container to workspace number $ws6

# ============================= ./WORKSPACES ====================================

# ============================= COLORS ====================================

# Titlebar, border colors
# class                 border  backgr. text    indicator child_border
client.focused          #0066ff #0066ff #ffffff #0066ff   #0066ff
client.focused_inactive #333333 #333333 #ffffff #333333   #333333
client.unfocused        #666666 #666666 #ffffff #666666   #666666
client.urgent           #ff0000 #ff0000 #ffffff #ff0000   #ff0000
client.placeholder      #666666 #0c0c0c #ffffff #000000   #0c0c0c
client.background       #f0f0f0

# ============================= ./COLORS ====================================

# ============================= RULES ====================================
#smart|urgent|focus|none
focus_on_window_activation focus

# Firefox focus
#for_window [urgent=latest class="firefox"] focus output DP-2
# superProductivity focus
# for_window [urgent=latest class="superProductivity" instance="superproductivity"] focus workspace $ws4

# popup on fullscreen
popup_during_fullscreen smart
for_window [window_role="pop-up"]                       floating enable
for_window [window_role="bubble"]                       floating enable
for_window [window_role="task_dialog"]                  floating enable
for_window [window_role="Preferences"]                  floating enable
for_window [window_type="dialog"]                       floating enable
for_window [window_type="menu"]                         floating enable
for_window [window_type="Dunst"]                        floating enable

for_window [title="^menu_term$"] floating enable, resize set width 50 ppt height 50 ppt, move center
for_window [title="^screensaver$"] fullscreen toggle global
for_window [title="^drop_down_term$"] floating enable, resize set width 100 ppt height 60 ppt, move position 0px 0px, move scratchpad
for_window [title="^wifi_term$"] floating enable, resize set width 36 ppt height 39 ppt, move center
for_window [title="^pulsemixer_term$"] floating enable, resize set width 36 ppt height 39 ppt, move center

# title bar, rules
# floating rule for save as dialogs
# Evince and other who use same title
for_window [title="Save As"] floating enable border pixel 3 resize set 700 700 move position center

# Delete title bar
for_window [class="^.*"] border pixel 3

# enable window icons for all windows
for_window [all] title_window_icon on

# enable window icons for all windows with extra horizontal padding
for_window [all] title_window_icon padding 3px

force_display_urgency_hint 500 ms

# default border pixel width (gaps)
gaps inner 1
gaps outer 1

smart_gaps on

# Window borders
default_border pixel 1
default_floating_border normal
hide_edge_borders smart


# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
# font pango:Roboto Regular 11
# font pango:JetbrainsMono Nerd Font Regular 11
font pango:MesloLGM Nerd Font Mono Regular 11

# ============================= ./RULES ====================================
