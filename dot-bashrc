# Source completions
for file in $HOME/.config/bash/completions/*; do
    [ -f "$file" ] && source "$file"
done

# auto-switch to zsh unless DISABLE_AUTO_ZSH is set or parent is already zsh
#
# DISABLE_AUTO_ZSH=1 exec bash    # replaces current shell with bash and inherits the opt-out
#
if [[ -z "${DISABLE_AUTO_ZSH-}" ]]; then
  parent_cmd=$(ps --no-header --pid="$PPID" --format=comm 2>/dev/null || true)
  if [[ "$parent_cmd" != "zsh" ]]; then
    if command -v zsh >/dev/null 2>&1; then
      exec zsh
    else
      echo "zsh not found, staying in bash"
    fi
  fi
fi

